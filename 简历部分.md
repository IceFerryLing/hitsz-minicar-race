

2025.09.25-2025.12.02    STM32智能循迹小车控制系统    三人合作

项目描述：基于STM32微控制器开发的智能循迹小车，采用多传感器融合技术和三重PID控制架构，
实现高精度路径跟踪和姿态稳定控制。

技术栈：STM32 HAL库 | C语言 | 三重PID控制算法 | 多传感器融合 | 实时系统

负责内容：
- 设计三重PID控制架构：转向环(PD) + 角速度环(PD) + 速度环(PI)，实现分层控制
- 开发多传感器融合算法：12路光电传感器加权计算路径偏差，BMI270陀螺仪积分计算角度
- 实现实时控制系统：TIM2定时器中断实现1kHz控制频率，端到端延迟<2ms
- 完成电机驱动控制：双H桥PWM驱动，支持正反转及速度精确调节
- 系统调试优化：通过串口调试监控关键变量，调节PID参数使循迹偏差±2mm内

技术亮点：
- 三重PID控制架构有效抑制超调，转向超调<10%，调节时间<200ms
- 多传感器融合提高系统鲁棒性，单传感器失效时仍可维持基本功能
- 1ms硬实时控制周期满足工业级实时性要求
- 完整嵌入式开发流程：从硬件设计、固件开发到算法调试的全过程实践

硬件配置：
- 主控：STM32系列MCU，72MHz主频
- 传感器：12路光电阵列，BMI270陀螺仪(SPI接口)
- 反馈：TIM3/TIM4编码器模式
- 驱动：双H桥电机驱动器，PWM频率10kHz
- 调试：USART3串口，115200bps

核心代码片段：
```c
// 1ms定时器中断服务函数
void HAL_TIM_PeriodElapsedCallback(TIM_HandleTypeDef* htim) {
    if(htim->Instance == TIM2) {
        Update_Sensors();    // 更新传感器数据
        PID_Control();       // 执行三重PID控制
        Motor_Control();     // 输出电机控制信号
    }
}

// PID控制核心算法
float turn_output = KP_turn*deviation + KD_turn*(deviation-last_deviation);
float gyro_output = KP_gyro*(turn_output-gyro_z) + KD_gyro*derivative;
float pwm_output = KP_speed*error + KI_speed*integral;
```

项目成果：
- 实现高精度循迹控制，直道偏差±2mm以内
- 系统响应快速，调节时间<200ms
- 代码结构清晰，模块化设计便于维护扩展
- 完整技术文档，包括硬件接线图、软件流程图和调试指南
